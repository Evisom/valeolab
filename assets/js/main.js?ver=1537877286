jQuery(document).ready(function($) {

	$('#top-menu .nav__item a').on('click', function(){
		var name = $(this).text().toLowerCase();
		if(name == 'наука'){
            ga('send', 'event', 'Menu', 'Button_Click', 'Science');
		}
		if(name == 'производство'){
            ga('send', 'event', 'Menu', 'Button_Click', 'Production');
		}
		if(name == 'стандарты'){
            ga('send', 'event', 'Menu', 'Button_Click', 'Standarts');
		}
		if(name == 'продукт'){
            ga('send', 'event', 'Menu', 'Button_Click', 'Product');
		}
		if(name == 'компоненты'){
            ga('send', 'event', 'Menu', 'Button_Click', 'Components');
		}
		if(name == 'экоподход'){
            ga('send', 'event', 'Menu', 'Button_Click', 'Eco');
		}


	});

	$('.link__text').on('click', function(){
		var name = $(this).parents('.technology__link').attr('href');
		console.log(name)

		if(name == '/production/'){
            ga('send', 'event', 'Main', 'Button_Click', 'Production');
		}
		if(name == '/nauka/'){
            ga('send', 'event', 'Main', 'Button_Click', 'Science');
		}
		if(name == '/product/'){
            ga('send', 'event', 'Main', 'Button_Click', 'Product');
		}
		if(name == '/komponenty/'){
            ga('send', 'event', 'Menu', 'Button_Click', 'Components');
		}
		if(name == '/ekopodxod/'){
            ga('send', 'event', 'Menu', 'Button_Click', 'Eco');
		}


	});

// polyfill for svg sprite

	svg4everybody();

// tabs
	
	var trigger = $('[data-trigger]'),
			scene = $('[data-scene]');

			trigger.on('click', function(event) {
				event.preventDefault();
				var triggerValue = $(this).data('trigger');
				trigger.removeClass('tabs__trigger_active');
				$(this).addClass('tabs__trigger_active');
				scene.css({display: 'none'});
				$('[data-scene="' + triggerValue + '"]').css({display: 'block'});
			});


	//	animation (change pics)


	function showNextPic() {

		var	pics = $('.technology__right-bot-bg-elem');
		var activePic = $('.technology__right-bot-bg-elem_active');
		
		
		if (activePic.next().hasClass('technology__right-bot-bg-elem')) {
			activePic.next().addClass('technology__right-bot-bg-elem_active');
		} else {
			$(pics[0]).addClass('technology__right-bot-bg-elem_active');
		}
		activePic.removeClass('technology__right-bot-bg-elem_active');
			
	}


	function Timer(fn, t) {
    var timerObj = setInterval(fn, t);

    this.stop = function() {
        if (timerObj) {
            clearInterval(timerObj);
            timerObj = null;
        }
        return this;
    }

    // start timer using current settings (if it's not already running)
    this.start = function() {
        if (!timerObj) {
            this.stop();
            timerObj = setInterval(fn, t);
        }
        return this;
    }

    // start with new interval, stop current interval
    this.reset = function(newT) {
        t = newT;
        return this.stop().start();
    }
    return this;
	}

	var runAnimation = new Timer(showNextPic, 2000);




// animation slow-show


	function scrollShow(){
		var count_block = 0;
		$('.slow-show').each(function(){
			var this_h = $(this).offset().top+100;
			var window_offset = window.scrollY+$(window).height()-10;

			var _this = this;
			var thisDelay = $(this).data('delay');

			if($(window).width() > 1200) {
				if(this_h<window_offset){
					
					setTimeout(function() { 
					 	$(_this).addClass('slow-show_active');

					 }, thisDelay);
						
					 
				} 
			} else {
				if(this_h<window_offset){
					
					setTimeout(function() { 
					 	$(_this).addClass('slow-show_active');

					 }, 200);
						// count_block+=400
					 // setTimeout(function() { $(_this).css("transform", 'translate(0, 0)'); }, count_block+=100);
					 
				}
			}

		});

	}

	scrollShow();
	$( window ).scroll(scrollShow)



// slow-show2


function scrollShow2(){

    fixLinesBlocksPic();

    $('.slow-show2').each(function(){
			var this_h = $(this).offset().top;
			var window_offset = window.scrollY+$(window).height()-10;
			var _this = this;

			if($(window).width() > 1200) {

				if(this_h<window_offset){

				 	$(_this).addClass('slow-show2_active');

				}  
			} else {

				if(this_h<window_offset){

					 	$(_this).addClass('slow-show2_active');

				}
			}

		});

	}


	scrollShow2();
	$( window ).scroll(scrollShow2)


// some parallax

$('[data-scroll-speed]').moveIt();





// mobile menu

var mobileMenu = $('.header__nav'),
		burger = $('.burger__trigger');

		burger.on('click', function(event) {
			event.preventDefault();
			$(this).toggleClass('burger__trigger_active');
			$(this).closest('.burger').next('.header__nav').toggleClass('header__nav_active');

			$('html').toggleClass('html_fixed');
		});
		$(document).on('click', function(e) {
			var target = $(e.target);
			if(!target.closest('.header__right').length) {
				mobileMenu.removeClass('header__nav_active');
				burger.removeClass('burger__trigger_active');
				$('html').removeClass('html_fixed');
			}
			
		});



// fix production page
function fixProductionPageCards() {
	var pics = $('.lines-block__pic');
	var blocks = $('.lines-block');
	var minHeight = 9999;

	pics.each(function(index, el) {
		if($(this).height() < minHeight) {
			minHeight = $(this).height();
		}
	});

	blocks.each(function(index, el) {
		$(this).height(minHeight);
	});
	console.log(minHeight)
}

if($('.lines-block__pic').length) {
	fixProductionPageCards();

}


function fixProductionPage() {
	// if(document.querySelector('.production__mid-right')) {
	var productionRight = document.querySelector('.production__mid-right');
	var productionLeft = document.querySelector('.production__mid-left');

		if(document.documentElement.clientWidth > 768){

			productionLeft.style.height = productionRight.offsetHeight + 'px';

	}
	// }
}
if(document.querySelector('.production__mid-right')) {
fixProductionPage();
}



// fix video on production page

function fixVideoOnProductionPage() {
	var videoBlock = $('.production-video__bg');
	var videoContainer = $('.production-video');
	var sectionBlock = $('.production__top');
	if(videoBlock.innerHeight() < sectionBlock.innerHeight()) {
		videoBlock.css({
			width: 'unset',
			height: '100%'
		});
	}
	if(videoContainer.innerWidth() > videoBlock.innerWidth()) {
		videoBlock.css({
			width: '100%',
			height: 'unset'
		});
	}
}

fixVideoOnProductionPage();
//fix lines-block on products page

function fixLinesBlocksPic() {
	var block = $('.lines-block_fix');
	// var pic = block.find('.lines-block__pic');
	block.each(function(index, el) {
		var pic = $(this).find('.lines-block__pic');
		var pic_w = $(this).find('.lines-block__pic').innerWidth();
		var block_w = $(this).innerWidth();

		if ((pic.height() <= 325) && $(window).width() > 1200) {
		pic.css({
			width: 'unset',
				height: '325px'
			});
		}
		if(block_w > pic_w) {
			pic.css({
				width: '100%',
				height: 'unset'
		});
	}


	});

}
fixLinesBlocksPic();

// fix acco on science page

function fixAcco() {
	var acco = $('.technology-acco__top');

	acco.each(function(index, el) {
		var pic = $(this).find('.technology-acco__pic');
		var pic_w = $(this).find('.technology-acco__pic').innerWidth();
		var block_w = $(this).innerWidth();

		if ((pic.height() <= 325) && $(window).width() > 1200) {
			pic.css({
				width: 'unset',
				height: '325px'
			});
		}
		if(block_w > pic_w) {
			pic.css({
				width: '100%',
				height: 'unset'
			});
		}
	});
}

fixAcco();

// fix lines-block


function fixLinesBlock() {
	var linesBlockText = $('.lines-block__text');
	var linesBlockTitle = $('.lines-block__title');
	linesBlockTitle.each(function(index, el) {

		var this_h = $(this).innerHeight();
		var thisBlock = $(this).closest(linesBlockText);
		var thisBlock_h = thisBlock.innerHeight();

		$(this).closest(linesBlockText).css({
			bottom: -thisBlock_h + this_h - 1
		});
	});
}

fixLinesBlock();

// choose language dropdown

var langTrigger = $('.lang__trigger'),
		langDropdown = $('.lang__dropdown');

		langTrigger.on('click', function(event) {
			event.preventDefault();
			$(this).toggleClass('lang__trigger_active');
			$(this).next(langDropdown).toggleClass('lang__dropdown_active');
			$(this).next(langDropdown).find('.lang__list').toggleClass('lang__list_active');
		});
		$(document).on('click', function(e) {
			var target = $(e.target);
			if(!target.closest('.lang').length) {
				langTrigger.removeClass('lang__trigger_active');

				langDropdown.removeClass('lang__dropdown_active');

				$('.lang__list').removeClass('lang__list_active');
			}

			
		});








// accos science page

function runScienceTopAcco() {
	var accoTrigger = $('.acco__trigger'),
	accoContent = $('.acco__content');

	accoTrigger.on('click', function(event) {
		event.preventDefault();
		if($(this).hasClass('acco__trigger_active')) {
			return;
		} else {
			var dataValue = $(this).data('trigger');
			// var sliderImg = $('[data-pic]');
			var sliderPath = $('.acco-slider__path');
			sliderPath.css({
				transform: 'translateX(' + -dataValue * 100 + '%)'
			});

			accoTrigger.removeClass('acco__trigger_active');

			$(this).addClass('acco__trigger_active');
			accoContent.slideUp(300);
			$(this).next(accoContent).slideDown(300);
		}
		
	});

}

runScienceTopAcco();


function runScienceBotAcco() {
	var accoTrigger = $('.technology-acco__trigger'),
		accoContent = $('.technology-acco__content');


		accoTrigger.on('click', function(event) {
			event.preventDefault();

			var window_h = $(window).height();
			var thisContent = $(this).closest('.technology-acco').find(accoContent);
			$(this).toggleClass('technology-acco__trigger_active');
			thisContent.toggleClass('technology-acco__content_active');

			thisContent.slideToggle(200, function(){

				var thisAccoHeight = parseInt($(this).closest('.technology-acco').outerHeight());
				var thisAccoOffset = parseInt($(this).closest('.technology-acco').offset().top);
				var accoBottomLine = thisAccoOffset+thisAccoHeight;
				var windowBottomLine = $(window).scrollTop() + $(window).height();
				if(thisContent.hasClass('technology-acco__content_active') && accoBottomLine > windowBottomLine) {
					$('body, html').animate({
		        scrollTop: accoBottomLine - $(window).height()
		      }, 200);
				}
				if(thisContent.hasClass('technology-acco__content_active') && $(window).width() < 768) {
					// $('body, html').animate({
		   //      scrollTop: thisContent.offset().top - $('.header').outerHeight()
		   //    }, 200);
				}
			});
			
			

			
			
			
		});
}

runScienceBotAcco();


// fix complex page pic

function fixComplexPagePic() {
	var pic = $('.complex__pic');
	var textBlock = $('.complex__right');

	textBlock.css({
		paddingTop: pic.height() + 64
	});
}

if($(window).width > 768) {
	fixComplexPagePic();
}


// sticky header
function stickyHeader() {
	var topPosition = -86;
	var stickyHeader = $('.header__nav');
	if($(window).width() > 768) {

		if($(window).scrollTop() > 180) {
			
				var position = $(window).scrollTop()-270;
				if(position < stickyHeader.outerHeight(true)){
					topPosition = Math.ceil(position/2)-43;
				}else{
					topPosition = 0;
				}

				stickyHeader.addClass('header__nav_sticky');
				stickyHeader.css({top:topPosition+'px'})
				
				
		}  
		else {
			topPosition=-86;
			stickyHeader.css({top:topPosition+'px'})
			
				stickyHeader.removeClass('header__nav_sticky');

		}		
	}
};

// line page animation



function runLinePageAnimation() {
	
	
	if($(window).width() > 768) {

		
			var windowOffset = $(window).scrollTop();
			var topSlider = $('.line__right');
			var topSliderHeight = parseInt(topSlider.innerHeight());
			var stickyHeader = $('.header__nav_sticky');
			var stickyHeaderHeight = parseInt(stickyHeader.innerHeight());
			var headerHeight = $('.header').innerHeight();
			var topSliderContainer = $('.line__container');
			var topSliderContainerHeight = topSliderContainer.innerHeight();
			var topSliderContainerEnd = topSliderContainerHeight - topSliderHeight + headerHeight - stickyHeaderHeight - 20;

			if( windowOffset > topSliderContainerEnd) {
				topSlider.css({
					top: topSliderContainerEnd - headerHeight + stickyHeaderHeight
				});

			}
			
		if(windowOffset > 150 && windowOffset < topSliderContainerEnd) {
			// var topSliderPosition = windowOffset + stickyHeaderHeight - headerHeight;
			if(stickyHeader.length) {
				var sliderPosition = parseInt(stickyHeader.offset().top - stickyHeaderHeight - 18);
				if(sliderPosition < 0) {
					sliderPosition = 0;
				}
				
			}
			topSlider.css({
				top: sliderPosition
			});
		} else if( windowOffset <= 160) {
			topSlider.css({
				top: 0
			});

		} 
	}
}

runLinePageAnimation();






// line-page top slider 

function linePageTopSlider() {
	var owl = $('.slider1__content');
	owl.owlCarousel({
		items: 1,
		loop: true,
		onInitialized: callback,
		dotsEach: true
		// nav: true
	});

	var pics = $('.slider1__pic');
	var minHeight = 9999;
	var picBlock = $('.slider1__item');
	pics.each(function(index, el) {
		console.log($(this).height());
		if($(this).height() < minHeight) {
			minHeight = $(this).height();
		}
		picBlock.each(function(index, el) {
			$(this).height(minHeight);
		});
	});

	function callback(event) {
		var items = event.item.count;
		var item = 1;
		owl.next('.slider1-controls').find('.paginator__count').text(item + ' / ' + items);
	}
	
	owl.on('changed.owl.carousel', function(event) {
		var items = event.page.count;
		var item = event.page.index + 1;
		$(this).next('.slider1-controls').find('.paginator__count').text(item + ' / ' + items);
	});
	
	$('.slider1 .paginator__arrow-right').click(function(e) {
		e.preventDefault();
    owl.trigger('next.owl.carousel');
	})

	$('.slider1 .paginator__arrow-left').click(function(e) {
		e.preventDefault();
    owl.trigger('prev.owl.carousel', [300]);
	})
}

linePageTopSlider();

// line-page custom bot slider


function customSlider() {
	var slider = $('.slider2__content');


	slider.each(function(index, el) {
		var _that = $(this);
		var sliderItem = $(this).find('.slider2__item'),
		arrowLeft = $(this).closest('.slider2').find('.paginator__arrow-left'),
		arrowRight = $(this).closest('.slider2').find('.paginator__arrow-right'),
		slider_w = sliderItem.outerWidth(true) * sliderItem.length,
		transformed = 0,
		allItems = sliderItem.length,
		paginatorCurrentItem = 1,
		paginatorText = $(this).closest('.slider2').find('.paginator__count');


				///// temp

		


		/////

		paginatorText.text(paginatorCurrentItem + ' / ' + allItems);


		arrowLeft.on('click', function(event) {
			event.preventDefault();
			
			var itemLength = sliderItem.outerWidth(true);
			
			transformed += itemLength;
			if(transformed > 0) {
				transformed = -slider_w + itemLength;
			}
			_that.css({
				transform: 'translate3d(' + transformed + 'px, 0px, 0px)'
			});
			paginatorCurrentItem--
			if(paginatorCurrentItem < 1) {
				paginatorCurrentItem = allItems;
			}
			paginatorText.text(paginatorCurrentItem + ' / ' + allItems);
		});

		arrowRight.on('click', function(event) {
			event.preventDefault();

			var itemLength = sliderItem.outerWidth(true);
			transformed -= itemLength;
			if(transformed < -slider_w + itemLength) {
				transformed = 0;
			}
			
			_that.css({
				transform: 'translate3d(' + transformed + 'px, 0px, 0px)'
				
			});
			paginatorCurrentItem++
			if(paginatorCurrentItem > allItems) {
				paginatorCurrentItem = 1;
			}
			paginatorText.text(paginatorCurrentItem + '/' + allItems);
		});


		$(this).width(slider_w);



////////

		if($('.examples').length) {
			var container = $('.examples .container');
		} else {
			var container = _that.closest('.technology-acco');
		}
		
		var paginator = _that.closest('.slider2').find('.paginator');
		var mobilePaginator = _that.closest('.slider2').find('.mobile-paginator');
		
		


		var mobilePaginatorItemFirst = document.createElement('div');
			mobilePaginatorItemFirst.classList.add('mobile-paginator__item');
			mobilePaginatorItemFirst.classList.add('mobile-paginator__item_active');
			mobilePaginatorItemFirst.setAttribute('data-page', 1);
			mobilePaginator.append(mobilePaginatorItemFirst);

		// начинаем с одного, т.к. первый уже есть на странице

		for(var i = 1; i < allItems; i++){
			var mobilePaginatorItem = document.createElement('div');
			mobilePaginatorItem.classList.add('mobile-paginator__item');
			mobilePaginatorItem.setAttribute('data-page', i + 1);
			mobilePaginator.append(mobilePaginatorItem);
		}

	
		
		$('.mobile-paginator__item').on('click', function(event) {
			if($(this).hasClass('mobile-paginator__item_active')) {
				return;
			} else {

				$('.mobile-paginator__item').removeClass('mobile-paginator__item_active');
				$(this).addClass('mobile-paginator__item_active');

				var val = $(this).data('page');
				var itemLength = sliderItem.outerWidth(true);
				var transform = -(itemLength * val) + itemLength;

				_that.css({
					transform: 'translate3d(' + transform + 'px, 0px, 0px)'
				});
			}
		});


		if($(window).width() > 768) {
			if(container.innerWidth() < slider_w) {
				paginator.show();
			}
		} else {

			if(container.innerWidth() < slider_w) {
				mobilePaginator.show();
			}
		}






// dragging slider
	

	function draggingSlider(e) {
		var	wasDragged = false, startMousePosition, isDragged = false;
		var shiftX;


		$(document).on('mousemove touchmove', function(e) {
            //если касание, то вычисляем через event.originalEvent.touches[0]:
            if (e.type == "touchmove") {
                var touch = e.originalEvent.touches[0];
                var offset = (touch.clientX);

                e.pageX = offset;
            }
            else {
            //если нажата кнопка мышки:
                var offset = (e.offsetX || e.clientX - $(e.target).offset().left);
            }
			
			if(isDragged && (startMousePosition!=e.pageX)) {
				
				_that.addClass('isDrugged');
				var itemLength = sliderItem.outerWidth(true);
				var diff = ( e.pageX - shiftX );
				diff = diff>0?0:diff;
				diff = diff< (-slider_w + itemLength)? (-slider_w + itemLength):diff;
				_that.css({
					transform: 'translate3d(' + parseInt(diff)  + 'px, 0px, 0px)'
				});
				wasDragged = true;
				
				
				var elem =  Math.abs(diff) / sliderItem.outerWidth(true);
				var mobilePaginatorItem = _that.closest('.slider2').find('.mobile-paginator__item');
				paginatorCurrentItem = Math.ceil(elem) + 1;
				paginatorText.text(Math.ceil(elem) + 1 + '/' + allItems);

				mobilePaginatorItem.removeClass('mobile-paginator__item_active');
				$(mobilePaginatorItem[Math.ceil(elem)]).addClass('mobile-paginator__item_active');

				//


			}

		});

		

		

		_that.on('mousedown touchstart', function(e) {
			//если касание, то вычисляем через event.originalEvent.touches[0]:
            if (event.type == "touchstart") {
                var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];
                var offset = (touch.clientX);
                e.pageX = offset;

            }
            else {
            //если нажата кнопка мышки:
                var offset = (e.offsetX || e.clientX - $(e.target).offset().left);
            }
            
			var sliderTransform = _that.css('transform');
			var coords = sliderTransform.split(',');
			$('.slider2__link').bindFirst('click', function(e){
					e.preventDefault();
					e.stopPropagation();
				});
				if(sliderTransform!='none'){
					coords = coords[4].trim();
				}else{
					coords = 0;
				}
				isDragged = true;
				wasDragged = false;
			shiftX = e.pageX - +coords;
			startMousePosition = e.pageX;

			
		});




		$(document).on('mouseup touchend', function(e) {
			 //если касание, то вычисляем через event.originalEvent.touches[0]:
            if (event.type == "touchend") {
                var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];
                var offset = (touch.clientX);
                e.pageX = offset;
            }
            else {
            //если нажата кнопка мышки:
                var offset = (e.offsetX || e.clientX - $(e.target).offset().left);
            }

			
				isDragged = false;
				if(!wasDragged){
						$('.slider2__link').unbind('click')
						$('.slider2__link').off('click')

				}else{
						slider.removeClass('isDrugged');
				}


		});
	}

	draggingSlider();

	});
		
}

customSlider();







// products page card fix, на ресайз эту функцию повесил чуть выше

function productsPageCardFix() {

	if($(window).width() < 768) {
		var block = $('.lines-block');

		block.each(function(index, el) {
			var this_h = $(this).innerHeight();
			var this_w = $(this).innerWidth();
			var thisPic = $(this).find('.lines-block__pic');
			
			if(this_w < thisPic.innerWidth()) {
				thisPic.css({
					width: '100%',
					height: 'unset'
				});
			}
			if(this_h >= thisPic.innerHeight()) {
				thisPic.css({
					width: 'unset',
					height: '300px'
				});
			}


		});
	}
	
}

productsPageCardFix();


// science page accos



// fix science page

function fixSciencePage() {
	var container = $('.science__top'),
	img = $('.science__top-right-pic');


	if(container.innerHeight() >= img.innerHeight()) {
		img.css({
			height: '100%',
			width: 'unset'
		});
		$('.science__top-right').css({
			width: 'unset',
			height: '100%'
		});
	} 

}

if($(window).width() > 1200){
	fixSciencePage();
}



// init scroll and resize events


$(window).on('scroll', function() {
	stickyHeader();
	runLinePageAnimation();
});

$(window).resize(function() {

	productsPageCardFix();
	fixLinesBlocksPic();
	fixAcco();


	if(document.querySelector('.production__mid-right')) {
	fixProductionPage();
	}
	if($(window).width() > 767) {
		fixVideos();
		fixComplexPagePic();
	}


	// remove stickyHeader on mobiles

	if ($(window).width() < 768) {
		$('.header__nav_sticky').removeClass('header__nav_sticky');
	}

});

    if ($(window).width() > 768) {
        var sources = document.querySelectorAll('video source');
// Define the video object this source is contained inside
        var video = document.querySelector('video');
        for (var i = 0; i < sources.length; i++) {
            sources[i].setAttribute('src', sources[i].getAttribute('data-src'));
        }
// If for some reason we do want to load the video after, for desktop as opposed to mobile (I'd imagine), use videojs API to load
	if(video != null) {
        video.load();

    }
}


// fix videos in section hero
function fixVideos() {

	var video = $('.hero__bg');
	var video_h = video.innerHeight();
	var section = video.closest('.hero');

	section.innerHeight(video_h);

}

if($(window).width() > 767) {
	fixVideos();
}


});



// video popup

var videoPopup = $('.popup-video-overlay'),
videoTrigger = $('.production-video__link'),
videoCloseButton = $('.popup-video__btn-close');
videoTrigger.on('click', function(event) {
	event.preventDefault();	
	videoPopup.show();
});

videoPopup.on('click', function(event) {
	event.preventDefault();
	$(this).hide();

    $('.popup-video__content video')[0].pause();
});
videoCloseButton.on('click', function(event) {
	event.preventDefault();
	videoPopup.hide();
    $('.popup-video__content video')[0].pause();
});
$('.popup-video__content video').on('click', function(event) {
	event.preventDefault();
	event.stopPropagation();
	var video_tag = $('.popup-video__content video')[0];
    if(video_tag.paused){
        video_tag.play();
	}else{
        video_tag.pause();
	}
});



// для нормальной работы слайдера

$('img').on('dragstart', function(event) { event.preventDefault(); });
$('a').on('dragstart', function(event) { event.preventDefault(); });

$.fn.bindFirst = function(name, fn) {
 this.on(name, fn);
 this.each(function() {
 var handler, handlers;
 handlers = $._data(this, 'events')[name.split('.')[0]];
 handler = handlers.pop();
 handlers.splice(0, 0, handler);
 });
};



$.fn.moveIt = function(){
  var $window = $(window);
  var instances = [];

  $(this).each(function(){
	instances.push(new moveItItem($(this)));
  });

  window.addEventListener('scroll', function(){
	var scrollTop = $window.scrollTop();
	instances.forEach(function(inst, key){
	  inst.update(scrollTop, instances, key);
	});
  }, {passive: true});
}
var moveItItem = function(el){
  this.el = $(el);
  this.speed = Math.abs(parseFloat(this.el.attr('data-scroll-speed')));
  this.sign = Math.sign(this.el.attr('data-scroll-speed'));
};

moveItItem.prototype.update = function(scrollTop, instances, num){
	var topOffset = this.el.parent().offset();
	var parentHeight = this.el.parent().height();
	var count_all = instances.length;
	// if(this.sign>0){
            // this.el.css('transform', 'translateY(' + -((topOffset.top - $(document).height()) / this.speed) + 'px)');
	// }else{
            this.el.css('transform', 'translateY(' + (-scrollTop / this.speed) + 'px)');
	// }
};

